"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var _bridge_1 = require("../_bridge");
var event_1 = require("./event");
var $ = _bridge_1._bridge("$");
var _login = _bridge_1._bridge("login");
/**
 * 清除用户当前登录态，并弹出登录对话框
 */
function login() {
    return _login.show();
}
exports.login = login;
/**
 * 清除用户当前登录态
 */
function logout() {
    return _login.logout();
}
exports.logout = logout;
if ($) {
    /**
     * 用户登录态失效时触发
     */
    $(document).on("logout", function () {
        try {
            event_1.userEmitter.emit("invalidate", { source: "logout" });
        }
        catch (err) {
            console.error(err);
        }
    });
    $(document).on("accountChanged", function () {
        try {
            event_1.userEmitter.emit("invalidate", { source: "accountChanged" });
        }
        catch (err) {
            console.error(err);
        }
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9naW4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvYnJpZGdlL3VzZXIvbG9naW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxzQ0FBcUM7QUFDckMsaUNBQXNDO0FBRXRDLElBQU0sQ0FBQyxHQUFHLGlCQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDdkIsSUFBTSxNQUFNLEdBQUcsaUJBQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUVoQzs7R0FFRztBQUNILFNBQWdCLEtBQUs7SUFDbkIsT0FBTyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDdkIsQ0FBQztBQUZELHNCQUVDO0FBRUQ7O0dBRUc7QUFDSCxTQUFnQixNQUFNO0lBQ3BCLE9BQU8sTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ3pCLENBQUM7QUFGRCx3QkFFQztBQUVELElBQUksQ0FBQyxFQUFFO0lBQ0w7O09BRUc7SUFDSCxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRTtRQUN2QixJQUFJO1lBQ0YsbUJBQVcsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7U0FDdEQ7UUFBQyxPQUFPLEdBQUcsRUFBRTtZQUNaLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDcEI7SUFDSCxDQUFDLENBQUMsQ0FBQztJQUNILENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUU7UUFDL0IsSUFBSTtZQUNGLG1CQUFXLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxFQUFFLE1BQU0sRUFBRSxnQkFBZ0IsRUFBRSxDQUFDLENBQUM7U0FDOUQ7UUFBQyxPQUFPLEdBQUcsRUFBRTtZQUNaLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDcEI7SUFDSCxDQUFDLENBQUMsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX2JyaWRnZSB9IGZyb20gXCIuLi9fYnJpZGdlXCI7XG5pbXBvcnQgeyB1c2VyRW1pdHRlciB9IGZyb20gXCIuL2V2ZW50XCI7XG5cbmNvbnN0ICQgPSBfYnJpZGdlKFwiJFwiKTtcbmNvbnN0IF9sb2dpbiA9IF9icmlkZ2UoXCJsb2dpblwiKTtcblxuLyoqXG4gKiDmuIXpmaTnlKjmiLflvZPliY3nmbvlvZXmgIHvvIzlubblvLnlh7rnmbvlvZXlr7nor53moYZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvZ2luKCkge1xuICByZXR1cm4gX2xvZ2luLnNob3coKTtcbn1cblxuLyoqXG4gKiDmuIXpmaTnlKjmiLflvZPliY3nmbvlvZXmgIFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgcmV0dXJuIF9sb2dpbi5sb2dvdXQoKTtcbn1cblxuaWYgKCQpIHtcbiAgLyoqXG4gICAqIOeUqOaIt+eZu+W9leaAgeWkseaViOaXtuinpuWPkVxuICAgKi9cbiAgJChkb2N1bWVudCkub24oXCJsb2dvdXRcIiwgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICB1c2VyRW1pdHRlci5lbWl0KFwiaW52YWxpZGF0ZVwiLCB7IHNvdXJjZTogXCJsb2dvdXRcIiB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9XG4gIH0pO1xuICAkKGRvY3VtZW50KS5vbihcImFjY291bnRDaGFuZ2VkXCIsICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgdXNlckVtaXR0ZXIuZW1pdChcImludmFsaWRhdGVcIiwgeyBzb3VyY2U6IFwiYWNjb3VudENoYW5nZWRcIiB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9XG4gIH0pO1xufVxuIl19