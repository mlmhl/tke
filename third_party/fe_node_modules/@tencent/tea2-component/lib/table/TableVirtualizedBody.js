"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var react_1 = tslib_1.__importStar(require("react"));
var react_window_1 = require("react-window");
var util_1 = require("../util");
function Row(_a) {
    var data = _a.data, index = _a.index, style = _a.style;
    return react_1.default.cloneElement(data[index], {
        style: tslib_1.__assign(tslib_1.__assign({}, style), { display: "flex" }),
    });
}
exports.TableVirtualizedBody = react_1.forwardRef(function TableVirtualizedBody(_a, ref) {
    var tableBoxStyle = _a.tableBoxStyle, onScrollCapture = _a.onScrollCapture, height = _a.height, itemHeight = _a.itemHeight, children = _a.children;
    var classPrefix = util_1.useConfig().classPrefix;
    var OuterElement = react_1.useMemo(function () {
        return react_1.forwardRef(function (props, ref) {
            return (react_1.default.createElement("div", tslib_1.__assign({ className: classPrefix + "-table__body", ref: ref, onScrollCapture: onScrollCapture }, props)));
        });
    }, 
    // eslint-disable-next-line react-hooks/exhaustive-deps
    []);
    var InnerElement = react_1.useMemo(function () {
        return react_1.forwardRef(function (_a, ref) {
            var _b = _a.style, style = _b === void 0 ? {} : _b, children = _a.children;
            return (react_1.default.createElement("table", { ref: ref, className: classPrefix + "-table__box", style: tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({}, (tableBoxStyle || {})), style), { maxHeight: undefined }) },
                react_1.default.createElement("tbody", null, children)));
        });
    }, 
    // eslint-disable-next-line react-hooks/exhaustive-deps
    []);
    var items = react_1.useMemo(function () {
        var items = [];
        react_1.default.Children.forEach(children, function (chlid) {
            if (react_1.default.isValidElement(chlid) && chlid.type === react_1.default.Fragment) {
                items.push.apply(items, tslib_1.__spread(react_1.default.Children.toArray(chlid.props.children)));
            }
            else {
                items.push(chlid);
            }
        });
        return items.filter(Boolean);
    }, [children]);
    return (react_1.default.createElement(react_window_1.FixedSizeList, { outerRef: ref, outerElementType: OuterElement, innerElementType: InnerElement, height: height, width: "100%", itemSize: itemHeight || 45, itemCount: items.length, itemData: items }, Row));
});
//# sourceMappingURL=TableVirtualizedBody.js.map