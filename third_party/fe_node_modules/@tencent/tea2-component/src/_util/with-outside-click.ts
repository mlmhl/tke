import React from "react";
import onClickOutSide from "react-onclickoutside";

export function withOutsideClick(methodName?: string) {
  return <C extends React.ComponentType<any>>(WrappedComponent: C): C => {
    const Component = onClickOutSide(WrappedComponent, {
      handleClickOutside: instance => instance[methodName],
    });
    return ((props =>
      React.createElement(Component, {
        ...props,
        outsideClickIgnoreClass: "ignore-outside-click",
      })) as any) as C;
  };
}
